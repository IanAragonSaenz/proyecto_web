<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Main page</title>
</head>
<body>
    <h1>Welcome</h1>
    Welcome <%= user.username %>, you are an <%= user.role %>
    <h2>Edit your details</h2>>
    To be developed.
    <h2>Log out</h2>
    <input type="button" value="logout" id="logout" />
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>       
        const btnLogout = document.getElementById('logout');
        btnLogout.addEventListener("click", (e) => {
            axios.post('http://127.0.0.1:3000/logout') // No params, the cookie handles it all
            .then(response => {
                console.log(response);
                alert(`You have been logged out, you are being redirected`);
                window.location.replace('http://127.0.0.1:3000/');
            })
            .catch(error => {
                console.log(error.response.data)
                alert(`Error: ${error.response.data}`);
            });
        });
    </script>
</body>
</html>
